System.register(["./index-legacy-C7XB_Vff.js","./lspLanguageFeatures-legacy-kbbHemLG.js"],function(e,t){"use strict";var r,i,n,o,s,g,a,d,l,u,c,h;return{setters:[e=>{r=e.bL,i=e.bM},t=>{n=t.H,o=t.D,s=t.h,g=t.F,a=t.b,d=t.S,l=t.c,u=t.f,c=t.g,h=t.C,e({CompletionAdapter:t.C,DefinitionAdapter:t.a,DiagnosticsAdapter:t.e,DocumentColorAdapter:t.d,DocumentFormattingEditProvider:t.f,DocumentHighlightAdapter:t.D,DocumentLinkAdapter:t.h,DocumentRangeFormattingEditProvider:t.g,DocumentSymbolAdapter:t.b,FoldingRangeAdapter:t.F,HoverAdapter:t.H,ReferenceAdapter:t.R,RenameAdapter:t.c,SelectionRangeAdapter:t.S,fromPosition:t.i,fromRange:t.j,toRange:t.t,toTextEdit:t.k})}],execute:function(){e({setupMode:function(e){const t=[],r=[],h=new m(e);t.push(h);const _=(...e)=>h.getLanguageServiceWorker(...e);return function(){const{languageId:t,modeConfiguration:h}=e;v(r),h.completionItems&&r.push(i.registerCompletionItemProvider(t,new p(_))),h.hovers&&r.push(i.registerHoverProvider(t,new n(_))),h.documentHighlights&&r.push(i.registerDocumentHighlightProvider(t,new o(_))),h.links&&r.push(i.registerLinkProvider(t,new s(_))),h.documentSymbols&&r.push(i.registerDocumentSymbolProvider(t,new a(_))),h.rename&&r.push(i.registerRenameProvider(t,new l(_))),h.foldingRanges&&r.push(i.registerFoldingRangeProvider(t,new g(_))),h.selectionRanges&&r.push(i.registerSelectionRangeProvider(t,new d(_))),h.documentFormattingEdits&&r.push(i.registerDocumentFormattingEditProvider(t,new u(_))),h.documentRangeFormattingEdits&&r.push(i.registerDocumentRangeFormattingEditProvider(t,new c(_)))}(),t.push(w(r)),w(t)},setupMode1:function(e){const t=new m(e),r=(...e)=>t.getLanguageServiceWorker(...e);let h=e.languageId;i.registerCompletionItemProvider(h,new p(r)),i.registerHoverProvider(h,new n(r)),i.registerDocumentHighlightProvider(h,new o(r)),i.registerLinkProvider(h,new s(r)),i.registerFoldingRangeProvider(h,new g(r)),i.registerDocumentSymbolProvider(h,new a(r)),i.registerSelectionRangeProvider(h,new d(r)),i.registerRenameProvider(h,new l(r)),"html"===h&&(i.registerDocumentFormattingEditProvider(h,new u(r)),i.registerDocumentRangeFormattingEditProvider(h,new c(r)))}});class m{constructor(e){this._defaults=e,this._worker=null,this._client=null,this._idleCheckInterval=window.setInterval(()=>this._checkIfIdle(),3e4),this._lastUsedTime=0,this._configChangeListener=this._defaults.onDidChange(()=>this._stopWorker())}_stopWorker(){this._worker&&(this._worker.dispose(),this._worker=null),this._client=null}dispose(){clearInterval(this._idleCheckInterval),this._configChangeListener.dispose(),this._stopWorker()}_checkIfIdle(){this._worker&&Date.now()-this._lastUsedTime>12e4&&this._stopWorker()}_getClient(){return this._lastUsedTime=Date.now(),this._client||(this._worker=r({moduleId:"vs/language/html/htmlWorker",createWorker:()=>new Worker(new URL("/tmagic-editor/playground/assets/html.worker-ZRWmz9vv.js",t.meta.url),{type:"module"}),createData:{languageSettings:this._defaults.options,languageId:this._defaults.languageId},label:this._defaults.languageId}),this._client=this._worker.getProxy()),this._client}getLanguageServiceWorker(...e){let t;return this._getClient().then(e=>{t=e}).then(t=>{if(this._worker)return this._worker.withSyncedResources(e)}).then(e=>t)}}e("WorkerManager",m);class p extends h{constructor(e){super(e,[".",":","<",'"',"=","/"])}}function w(e){return{dispose:()=>v(e)}}function v(e){for(;e.length;)e.pop().dispose()}}}});
//# sourceMappingURL=htmlMode-legacy-B66W87li.js.map
