import{d as y,i as k,u as N,e as p,o as d,g as h,f as g,n as E,j as v,k as w,w as B,c as x,F as M,b as S,C as A}from"./index-CB05xkW7.js";import{u as b,r as j}from"./use-app-BjZx0Alq.js";import{u as z}from"./use-component-status-B306AcGu.js";const H=y({name:"tmagic-iterator-container-item",__name:"IteratorItem",props:{config:{},iteratorIndex:{},iteratorContainerId:{},containerIndex:{},pageFragmentContainerId:{},index:{},model:{}},setup(t){const n=t,e=k("app"),c=N({componentType:"container",app:e}),{style:s,className:m}=z(n);return(r,o)=>(d(),p(h(g(c)),{style:v(g(s)),class:E(g(m)),config:t.config,"iterator-index":t.iteratorIndex,"iterator-container-id":t.iteratorContainerId,"page-fragment-container-id":t.pageFragmentContainerId},null,8,["style","class","config","iterator-index","iterator-container-id","page-fragment-container-id"]))}}),D=y({name:"tmagic-iterator-container",__name:"IteratorContainer",props:{config:{},iteratorIndex:{},iteratorContainerId:{},containerIndex:{},pageFragmentContainerId:{},model:{},disabled:{type:Boolean}},setup(t){const n=t,{app:e,node:c}=b(n);j(c);const s=w(()=>{let{iteratorData:r=[]}=n.config;const{itemConfig:o,dsField:i,items:a}=n.config;return Array.isArray(r)||(r=[]),(e==null?void 0:e.platform)==="editor"&&!r.length&&r.push({}),r.map(l=>{var f,u,I,C;const F=(e==null?void 0:e.platform)!=="editor"&&(u=(f=e==null?void 0:e.dataSourceManager)==null?void 0:f.compliedIteratorItemConds(l,o,i))!=null?u:!0;return{items:(C=(I=e==null?void 0:e.dataSourceManager)==null?void 0:I.compliedIteratorItems(l,a,i))!=null?C:a,condResult:F,style:{position:"relative",left:0,top:0,...o.style}}})});B(s,r=>{if(!n.config.id)return;const o=e==null?void 0:e.getNode(n.config.id,{iteratorContainerId:n.iteratorContainerId,iteratorIndex:n.iteratorIndex,pageFragmentContainerId:n.pageFragmentContainerId});o&&(o.resetNodes(),r.forEach((i,a)=>{o.setNodes(i.items,a)}))},{immediate:!0});const m=()=>{e&&c&&e.emit("".concat(A,"click"),c)};return(r,o)=>(d(),x("div",{onClick:m},[(d(!0),x(M,null,S(s.value,(i,a)=>(d(),p(H,{key:a,config:i,"iterator-index":[...t.iteratorIndex||[],a],"iterator-container-id":t.config.id?[...t.iteratorContainerId||[],t.config.id]:[...t.iteratorContainerId||[]],"page-fragment-container-id":t.pageFragmentContainerId},null,8,["config","iterator-index","iterator-container-id","page-fragment-container-id"]))),128))]))}});export{D as default};
//# sourceMappingURL=IteratorContainer-BZYiQmth.js.map
