import{d as C,u as k,i as F,f as p,n as E,g as $,j as b,o as d,k as A,w as S,C as O,D as j,c as I,F as _,e as h,b as H}from"./index-D9hNCYDJ.js";import{_ as y,u as v,r as w}from"./plugin-vueexport-helper-xb2XXZRC.js";import{u as D}from"./use-component-status-BkOadN8h.js";const L=C({name:"tmagic-iterator-container-item",props:{config:{type:Object,required:!0},iteratorIndex:Array,iteratorContainerId:Array,containerIndex:Number,pageFragmentContainerId:[String,Number],index:Number,model:{type:Object,default:()=>({})}},setup(e){const t=F("app"),a=k({componentType:"container",app:t}),{style:s,className:c}=D(e);return{style:s,className:c,containerComponent:a}}});function M(e,t,a,s,c,r){return d(),p(b(e.containerComponent),{style:$(e.style),class:E(e.className),config:e.config,"iterator-index":e.iteratorIndex,"iterator-container-id":e.iteratorContainerId,"page-fragment-container-id":e.pageFragmentContainerId},null,8,["style","class","config","iterator-index","iterator-container-id","page-fragment-container-id"])}const R=y(L,[["render",M]]),T=C({name:"tmagic-iterator-container",components:{IteratorItem:R},props:{config:{type:Object,required:!0},iteratorIndex:Array,iteratorContainerId:Array,containerIndex:Number,pageFragmentContainerId:[String,Number],model:{type:Object,default:()=>({})}},setup(e){const{app:t,node:a}=v(e);w(a);const s=A(()=>{let{iteratorData:r=[]}=e.config;const{itemConfig:n,dsField:o,items:i}=e.config;return(!Array.isArray(r)||typeof r[0]=="string"&&r[0].startsWith(j))&&(r=[]),(t==null?void 0:t.platform)==="editor"&&!r.length&&r.push({}),r.map(m=>{var l,g,u,f;const N=(t==null?void 0:t.platform)!=="editor"&&(g=(l=t==null?void 0:t.dataSourceManager)==null?void 0:l.compliedIteratorItemConds(m,n,o))!=null?g:!0;return{items:(f=(u=t==null?void 0:t.dataSourceManager)==null?void 0:u.compliedIteratorItems(m,i,o))!=null?f:i,condResult:N,style:{position:"relative",left:0,top:0,...n.style}}})});return S(s,r=>{if(!e.config.id)return;const n=t==null?void 0:t.getNode(e.config.id,{iteratorContainerId:e.iteratorContainerId,iteratorIndex:e.iteratorIndex,pageFragmentContainerId:e.pageFragmentContainerId});n&&(n.resetNodes(),r.forEach((o,i)=>{n.setNodes(o.items,i)}))},{immediate:!0}),{configs:s,clickHandler:()=>{t&&a&&t.emit("".concat(O,"click"),a)}}}});function B(e,t,a,s,c,r){const n=H("IteratorItem");return d(),I("div",{onClick:t[0]||(t[0]=(...o)=>e.clickHandler&&e.clickHandler(...o))},[(d(!0),I(_,null,h(e.configs,(o,i)=>(d(),p(n,{key:i,config:o,"iterator-index":[...e.iteratorIndex||[],i],"iterator-container-id":e.config.id?[...e.iteratorContainerId||[],e.config.id]:[...e.iteratorContainerId||[]],"page-fragment-container-id":e.pageFragmentContainerId},null,8,["config","iterator-index","iterator-container-id","page-fragment-container-id"]))),128))])}const V=y(T,[["render",B]]);export{V as default};
//# sourceMappingURL=IteratorContainer-CfB_EWSd.js.map
