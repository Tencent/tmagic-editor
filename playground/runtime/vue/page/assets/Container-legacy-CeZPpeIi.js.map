{"version":3,"file":"Container-legacy-CeZPpeIi.js","sources":["../../../../../node_modules/.pnpm/@tmagic+vue-container@1.2.0_@tmagic+core@1.6.0_typescript@5.9.2__@tmagic+vue-runtime-he_6890d2f5f27c4de0dc53e3198607c099/node_modules/@tmagic/vue-container/src/Component.ts","../../../../../node_modules/.pnpm/@tmagic+vue-container@1.2.0_@tmagic+core@1.6.0_typescript@5.9.2__@tmagic+vue-runtime-he_6890d2f5f27c4de0dc53e3198607c099/node_modules/@tmagic/vue-container/src/Container.vue"],"sourcesContent":["import { defineComponent, h, inject, type PropType, provide } from 'vue-demi';\n\nimport type TMagicApp from '@tmagic/core';\nimport { Id, IS_DSL_NODE_KEY, MComponent } from '@tmagic/core';\nimport { useComponent, useComponentStatus, useNode, type UserRenderFunction } from '@tmagic/vue-runtime-help';\n\nexport default defineComponent({\n  name: 'tmagic-container-item',\n\n  props: {\n    config: {\n      type: Object as PropType<Omit<MComponent, 'id'>>,\n      required: true,\n    },\n    index: Number,\n    iteratorIndex: {\n      type: Array as PropType<number[]>,\n      default: () => [],\n    },\n    iteratorContainerId: {\n      type: Array as PropType<Id[]>,\n      default: () => [],\n    },\n    pageFragmentContainerId: {\n      type: [String, Number] as PropType<Id>,\n      default: '',\n    },\n  },\n\n  setup(props) {\n    const userRender = inject<UserRenderFunction>(\n      'userRender',\n      ({ h, type, props = {}, attrs = {}, style, className, on }) => {\n        const options: Record<string, any> = {\n          ...props,\n          ...attrs,\n          style,\n          class: className,\n        };\n        if (on) {\n          for (const [key, handler] of Object.entries(on)) {\n            options[`on${key[0].toLocaleUpperCase()}${key.substring(1)}`] = handler;\n          }\n        }\n        return h(type, options);\n      },\n    );\n\n    const app = inject<TMagicApp>('app');\n    const node = useNode(props);\n\n    const componentStatusStore = useComponentStatus(props);\n\n    provide('componentStatusStore', componentStatusStore);\n\n    const { style, className } = componentStatusStore;\n\n    return () => {\n      if (props.config.visible === false) return null;\n      if (props.config.condResult === false) return null;\n\n      if (typeof props.config.display === 'function' && props.config.display({ app, node }) === false) {\n        return null;\n      }\n\n      return userRender({\n        h,\n        config: props.config,\n        type: useComponent({ componentType: props.config.type, app }),\n        style: style.value,\n        className: className.value,\n        props: {\n          config: { ...props.config, [IS_DSL_NODE_KEY]: true },\n          containerIndex: props.index,\n          iteratorIndex: props.iteratorIndex,\n          iteratorContainerId: props.iteratorContainerId,\n          pageFragmentContainerId: props.pageFragmentContainerId,\n        },\n        attrs: {\n          'data-tmagic-id': props.config.id,\n          'data-tmagic-iterator-index': props.iteratorIndex.join(',') || undefined,\n          'data-tmagic-iterator-container-id': props.iteratorContainerId.join(',') || undefined,\n          'data-tmagic-container-index': props.index,\n          'data-tmagic-page-fragment-container-id': props.pageFragmentContainerId || undefined,\n        },\n      });\n    };\n  },\n});\n","<template>\n  <div @click=\"clickHandler\">\n    <slot>\n      <ItemComponent\n        v-for=\"(item, index) in config.items\"\n        :key=\"item.id\"\n        :config=\"item\"\n        :index=\"index\"\n        :iterator-index=\"iteratorIndex\"\n        :iterator-container-id=\"iteratorContainerId\"\n        :page-fragment-container-id=\"pageFragmentContainerId\"\n      ></ItemComponent>\n    </slot>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, inject, type PropType } from 'vue-demi';\n\nimport type TMagicApp from '@tmagic/core';\nimport { COMMON_EVENT_PREFIX, type Id, type MContainer } from '@tmagic/core';\nimport { registerNodeHooks, useNode } from '@tmagic/vue-runtime-help';\n\nimport ItemComponent from './Component';\n\ninterface ContainerSchema extends Omit<MContainer, 'id'> {\n  id?: Id;\n  type?: 'container';\n}\n\nexport default defineComponent({\n  name: 'tmagic-container',\n\n  props: {\n    config: {\n      type: Object as PropType<ContainerSchema>,\n      required: true,\n    },\n    iteratorIndex: {\n      type: Array as PropType<number[]>,\n      default: () => [],\n    },\n    iteratorContainerId: {\n      type: Array as PropType<Id[]>,\n      default: () => [],\n    },\n    containerIndex: Number,\n    pageFragmentContainerId: [String, Number] as PropType<Id>,\n    model: {\n      type: Object,\n      default: () => ({}),\n    },\n  },\n\n  components: { ItemComponent },\n\n  setup(props) {\n    const app = inject<TMagicApp>('app');\n    const node = useNode(props, app);\n    registerNodeHooks(node);\n\n    const clickHandler = () => {\n      if (app && node) {\n        app.emit(`${COMMON_EVENT_PREFIX}click`, node);\n      }\n    };\n\n    return {\n      clickHandler,\n    };\n  },\n});\n</script>\n"],"names":["ItemComponent","defineComponent","name","props","config","type","Object","required","index","Number","iteratorIndex","Array","default","iteratorContainerId","pageFragmentContainerId","String","setup","userRender","inject","h","attrs","style","className","on","options","class","key","handler","entries","toLocaleUpperCase","substring","app","node","useNode","componentStatusStore","useComponentStatus","provide","visible","condResult","display","useComponent","componentType","value","IS_DSL_NODE_KEY","containerIndex","id","join","_sfc_main","model","components","registerNodeHooks","clickHandler","emit","COMMON_EVENT_PREFIX","_createElementBlock","onClick","_cache","args","_ctx","_renderSlot","_openBlock","_Fragment","_renderList","items","item","_createBlock","_component_ItemComponent"],"mappings":"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","x_google_ignoreList":[0,1]}